<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>home</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
 
<body>
<button onclick="funct()">123</button>
    <div id="main" style="width:600px;height:400px;"></div>
</body>

<script>
    var myChart = echarts.init(document.getElementById('main'));
    var option = {
        xAxis:{},
        yAxis:{},
        series:[
            {
                 data:[
		      [20,120],
		      [50,100],
		      [40,50]
                      ],
                 type:'line'
	},
{
	data:[
	],
	type:'line'
},        
    ]
    };
    var idx = 0
function funct(){
    idx = idx + 1
    option.series[0].data.push([idx,idx*100])

	function cb1(data){
		option.series[1].data.push([idx,Number(data)])
	}
	get('/item1',cb1)
    myChart.setOption(option);
}

function get(url,callback){
	var httpRequest = new XMLHttpRequest();
	httpRequest.open('GET',url,true);
	httpRequest.send();
	httpRequest.onreadystatechange = function(){
	if(httpRequest.readyState == 4 && httpRequest.status == 200){
		var json = httpRequest.responseText;
		callback(json)
		}	
	};
}

</script>
 
</html>
